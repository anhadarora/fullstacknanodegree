from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker
from database_setup import Base, company, item

engine = create_engine('sqlite:///healthitems.db')

Base.metadata.bind = engine
DBSession = sessionmaker(bind = engine)

session = DBSession()


Jawbone = company(compID = 1, name = "Jawbone")
JawboneUP3 = item(itemID = 1, name = "Jawbone UP3", description = "The latest UP!", category = "tracker", price = "$174.99", company = "Jawbone")

session.add(Jawbone)
session.add(JawboneUP3)

session.commit()

session.query(company).all()
session.query(item).all()

# using py 'for' loop to read and query the data
# variable that corresponds to single row in DB
# these references allow to extract column entries as method names
firstResult = session.query(company).first()
firstResult.name

items = session.query(items).all()
for item in items:
	print item.name


jawboneList = session.query(company).filter_by(name= 'Jawbone') 
	for i in jawboneList:  
	   print i.id     
	   print i.price     
	   print i.company.name     
	   print "\n"
